# ãƒ†ã‚¹ãƒˆå®Ÿè£…ã‚¬ã‚¤ãƒ‰ - AdLex

AdLexãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è‡ªå‹•ãƒ†ã‚¹ãƒˆç’°å¢ƒã®å®Ÿè£…ãŒå®Œäº†ã—ã¾ã—ãŸã€‚ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œæ–¹æ³•ã¨å„ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®è©³ç´°ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚

## ğŸ§ª ãƒ†ã‚¹ãƒˆæ§‹æˆ

### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Vitest + React Testing Library
- **ãƒ¢ãƒƒã‚¯**: MSW (Mock Service Worker)
- **ã‚«ãƒãƒ¬ãƒƒã‚¸**: Istanbul (c8)

### E2Eãƒ†ã‚¹ãƒˆ
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Playwright
- **ãƒ–ãƒ©ã‚¦ã‚¶**: Chromium, Firefox, WebKit
- **ãƒ‡ãƒã‚¤ã‚¹**: Desktop & Mobile

## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
â”œâ”€â”€ vitest.config.ts              # Vitestè¨­å®š
â”œâ”€â”€ playwright.config.ts          # Playwrightè¨­å®š
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ test/
â”‚   â”‚   â”œâ”€â”€ setup.ts              # ãƒ†ã‚¹ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
â”‚   â”‚   â””â”€â”€ mocks/
â”‚   â”‚       â”œâ”€â”€ server.ts         # MSWã‚µãƒ¼ãƒãƒ¼è¨­å®š
â”‚   â”‚       â””â”€â”€ handlers.ts       # APIãƒ¢ãƒƒã‚¯ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
â”‚   â”œâ”€â”€ lib/__tests__/
â”‚   â”‚   â””â”€â”€ utils.test.ts         # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ components/__tests__/
â”‚   â”‚   â””â”€â”€ ui/button.test.tsx    # Buttonã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆ
â”‚   â””â”€â”€ app/api/dictionaries/__tests__/
â”‚       â””â”€â”€ route.test.ts         # API ãƒ«ãƒ¼ãƒˆãƒ†ã‚¹ãƒˆ
â””â”€â”€ e2e/
    â”œâ”€â”€ auth.spec.ts              # èªè¨¼E2Eãƒ†ã‚¹ãƒˆ
    â””â”€â”€ text-checker.spec.ts      # ãƒ¡ã‚¤ãƒ³æ©Ÿèƒ½E2Eãƒ†ã‚¹ãƒˆ
```

## ğŸš€ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰

### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ

```bash
# å…¨ã¦ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
npm run test

# ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œ
npm run test:watch

# UIãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œ
npm run test:ui

# ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ãã§å®Ÿè¡Œ
npm run test:coverage
```

### E2Eãƒ†ã‚¹ãƒˆ

```bash
# å…¨ã¦ã®E2Eãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
npm run test:e2e

# UIãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œï¼ˆãƒ–ãƒ©ã‚¦ã‚¶è¡¨ç¤ºï¼‰
npm run test:e2e:ui

# ãƒ˜ãƒƒãƒ‰ãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œï¼ˆãƒ–ãƒ©ã‚¦ã‚¶è¡¨ç¤ºï¼‰
npm run test:e2e:headed

# å…¨ã¦ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
npm run test:all
```

## ğŸ”§ äº‹å‰æº–å‚™

### 1. Supabaseãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã®èµ·å‹•

```bash
npm run supabase:start
```

### 2. ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®ä½œæˆ

```bash
npm run seed
```

### 3. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•ï¼ˆE2Eãƒ†ã‚¹ãƒˆç”¨ï¼‰

```bash
npm run dev
```

## ğŸ“ å®Ÿè£…ã•ã‚ŒãŸãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹

### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ

#### `src/lib/__tests__/utils.test.ts`
- **cné–¢æ•°**: ã‚¯ãƒ©ã‚¹åã®ãƒãƒ¼ã‚¸æ©Ÿèƒ½
- **formatDateé–¢æ•°**: æ—¥æœ¬èªæ—¥ä»˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

#### `src/components/__tests__/ui/button.test.tsx`
- ãƒœã‚¿ãƒ³ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
- ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†
- ãƒãƒªã‚¢ãƒ³ãƒˆãƒ»ã‚µã‚¤ã‚ºé©ç”¨
- disabledçŠ¶æ…‹
- asChildæ©Ÿèƒ½

#### `src/app/api/dictionaries/__tests__/route.test.ts`
- GET APIï¼ˆè¾æ›¸ä¸€è¦§å–å¾—ï¼‰
- POST APIï¼ˆè¾æ›¸é …ç›®ä½œæˆï¼‰
- èªè¨¼ãƒ»èªå¯ãƒã‚§ãƒƒã‚¯
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

### E2Eãƒ†ã‚¹ãƒˆ

#### `e2e/auth.spec.ts`
- ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
- çµ„ç¹”ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
- èªè¨¼ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

#### `e2e/text-checker.spec.ts`
- ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ãƒ»æ–‡å­—æ•°åˆ¶é™
- ãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½å®Ÿè¡Œ
- çµæœè¡¨ç¤ºãƒ»å±¥æ­´ç®¡ç†
- é•åè©³ç´°è¡¨ç¤º

## ğŸ¯ ãƒ†ã‚¹ãƒˆã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### 1. ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
- **å˜ä¸€è²¬ä»»**: 1ã¤ã®ãƒ†ã‚¹ãƒˆã¯1ã¤ã®æ©Ÿèƒ½ã®ã¿ãƒ†ã‚¹ãƒˆ
- **ç‹¬ç«‹æ€§**: ãƒ†ã‚¹ãƒˆé–“ã§ä¾å­˜é–¢ä¿‚ã‚’ä½œã‚‰ãªã„
- **ãƒ‡ãƒ¼ã‚¿åˆ†é›¢**: ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¦DBã«ä¾å­˜ã—ãªã„

### 2. E2Eãƒ†ã‚¹ãƒˆ
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦–ç‚¹**: å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
- **é‡è¦ãªãƒ•ãƒ­ãƒ¼**: ãƒ¡ã‚¤ãƒ³æ©Ÿèƒ½ã«é›†ä¸­
- **é©åˆ‡ãªå¾…æ©Ÿ**: éåŒæœŸå‡¦ç†ã«å¯¾ã™ã‚‹é©åˆ‡ãªã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ

### 3. ãƒ¢ãƒƒã‚¯æˆ¦ç•¥
- **å¤–éƒ¨API**: OpenAI APIãªã©ã®å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹
- **Supabase**: èªè¨¼ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œ
- **ãƒ–ãƒ©ã‚¦ã‚¶API**: matchMediaã€ResizeObserverãªã©

## ğŸ› ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚¨ãƒ©ãƒ¼

```bash
# ä¾å­˜é–¢ä¿‚ã®å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm ci

# Playwrightãƒ–ãƒ©ã‚¦ã‚¶ã®å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npx playwright install

# ãƒ†ã‚¹ãƒˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ã‚¯ãƒªã‚¢
npm run test -- --clearCache
```

### E2Eãƒ†ã‚¹ãƒˆã®ãƒ‡ãƒãƒƒã‚°

```bash
# ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œ
npm run test:e2e:headed

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆã®ã¿å®Ÿè¡Œ
npx playwright test auth.spec.ts

# ãƒˆãƒ¬ãƒ¼ã‚¹æ©Ÿèƒ½ã‚’ä½¿ç”¨
npx playwright test --trace on
```

## ğŸ“Š ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™

- **ç·åˆã‚«ãƒãƒ¬ãƒƒã‚¸**: 80%ä»¥ä¸Š
- **é–¢æ•°ã‚«ãƒãƒ¬ãƒƒã‚¸**: 85%ä»¥ä¸Š
- **ãƒ–ãƒ©ãƒ³ãƒã‚«ãƒãƒ¬ãƒƒã‚¸**: 75%ä»¥ä¸Š

ç¾åœ¨ã®ã‚«ãƒãƒ¬ãƒƒã‚¸çŠ¶æ³ã¯ `npm run test:coverage` ã§ç¢ºèªã§ãã¾ã™ã€‚

## ğŸ”„ CI/CDçµ±åˆ

### GitHub Actionsä¾‹

```yaml
name: Tests
on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: '20'
      - run: npm ci
      - run: npm run test
      - run: npx playwright install --with-deps
      - run: npm run test:e2e
```

## ğŸ“ˆ ä»Šå¾Œã®æ‹¡å¼µäºˆå®š

- **Visual Regression Testing**: UIå¤‰æ›´ã®æ¤œçŸ¥
- **Performance Testing**: è² è·ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
- **Accessibility Testing**: ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯
- **API Contract Testing**: OpenAPIä»•æ§˜ã¨ã®æ•´åˆæ€§

---

**ä½œæˆæ—¥**: 2025-01-25  
**ãƒ†ã‚¹ãƒˆå®Ÿè£…**: Vitest + Playwright  
**ã‚«ãƒãƒ¬ãƒƒã‚¸**: åŸºæœ¬æ©Ÿèƒ½ã®ä¸»è¦éƒ¨åˆ†ã‚’ã‚«ãƒãƒ¼