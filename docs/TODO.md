# AdLex 開発TODO リスト

最終更新: 2025-07-15

## 📋 概要

AdLex（薬機法チェック & リライト SaaS）の開発進捗管理用TODOリストです。要件定義書と詳細設計書に基づいて、実装すべき機能を細かくフェーズ分けしています。

### 凡例
- ✅ **完了**: 実装済み・テスト済み
- 🔄 **進行中**: 開発中・部分実装
- ⏳ **未着手**: 実装予定
- ❌ **ブロック**: 依存関係により実装不可
- 🎯 **優先度高**: MVP リリースに必須

---

## 🎯 Phase 0: 基盤・認証システム

### 0.1 プロジェクトセットアップ
- [x] ✅ Next.js 15 + TypeScript プロジェクト初期化
- [x] ✅ Tailwind CSS + shadcn/ui セットアップ
- [x] ✅ ESLint + Prettier 設定
- [x] ✅ Git リポジトリ初期化
- [x] ✅ 環境変数管理 (.env.local)

### 0.2 データベース基盤
- [x] ✅ Supabase プロジェクト作成
- [x] ✅ PostgreSQL 基本設定
- [x] ✅ pg_trgm 拡張有効化
- [x] ✅ pgvector 拡張有効化
- [x] ✅ データベーススキーマ設計
- [x] ✅ 初期マイグレーション作成

### 0.3 認証システム
- [x] ✅ Supabase Auth 設定
- [x] ✅ メール・パスワード認証
- [x] ✅ AuthContext 実装
- [x] ✅ ログイン・ログアウト機能
- [x] ✅ パスワードリセット機能
- [x] ✅ 認証ガード実装

### 0.4 組織管理システム
- [x] ✅ 組織テーブル設計・実装
- [x] ✅ ユーザーテーブル設計・実装
- [x] ✅ Row Level Security (RLS) 設定
- [x] ✅ 組織単位のデータ分離
- [x] ✅ ロール管理 (admin/user)

---

## 🎯 Phase 1: ユーザー管理

### 1.1 ユーザー招待システム
- [x] ✅ 招待リンク生成機能
- [x] ✅ メール送信機能 (Resend)
- [x] ✅ 招待受諾フロー
- [x] ✅ 招待期限管理
- [x] ✅ 管理者権限チェック

### 1.2 ユーザー管理UI
- [x] ✅ ユーザー一覧画面
- [x] ✅ ユーザー詳細画面
- [x] ✅ ユーザー招待画面
- [x] ✅ ロール変更機能
- [x] ✅ ユーザー削除機能

### 1.3 組織設定
- [x] ✅ 組織情報編集画面
- [x] ✅ 利用制限設定
- [ ] ⏳ 組織アイコン・ロゴ設定
- [ ] ⏳ 組織切り替え機能（将来対応）

---

## 🎯 Phase 2: 辞書管理システム

### 2.1 辞書CRUD操作
- [x] ✅ 辞書項目作成機能
- [x] ✅ 辞書項目編集機能
- [x] ✅ 辞書項目削除機能
- [x] ✅ 辞書項目一覧表示
- [x] ✅ カテゴリ管理 (NG/ALLOW)

### 2.2 辞書検索・フィルタ
- [x] ✅ テキスト検索機能
- [x] ✅ カテゴリフィルタ
- [x] ✅ ページネーション
- [ ] 🔄 高度な検索機能
- [ ] ⏳ ソート機能強化

### 2.3 Embedding システム
- [x] ✅ OpenAI Embedding API 統合
- [x] ✅ 自動ベクトル生成
- [x] ✅ ベクトル検索機能
- [x] ✅ 類似度閾値設定
- [ ] ⏳ Embedding 再生成機能

### 2.4 辞書インポート・エクスポート
- [ ] ⏳ CSV インポート機能 🎯
- [ ] ⏳ CSV エクスポート機能 🎯
- [ ] ⏳ バルクアップロード
- [ ] ⏳ インポートエラーハンドリング
- [ ] ⏳ データ検証機能

### 2.5 辞書管理UI強化
- [ ] ⏳ 一括編集機能
- [ ] ⏳ 重複検出機能
- [ ] ⏳ 辞書項目統計表示
- [ ] ⏳ 使用頻度分析

---

## 🎯 Phase 3: テキストチェック機能

### 3.1 基本チェック機能
- [x] ✅ TextChecker コンポーネント
- [x] ✅ テキスト入力UI
- [x] ✅ 文字数カウント・制限
- [x] ✅ チェック実行機能
- [x] ✅ リアルタイム処理状況表示

### 3.2 AI処理パイプライン
- [x] ✅ プリフィルタ (pg_trgm ≥0.3)
- [x] ✅ セマンティック検索 (pgvector >0.75)
- [x] ✅ OpenAI GPT-4o 統合
- [x] ✅ LM Studio 開発環境対応
- [x] ✅ Function calling 実装

### 3.3 結果表示システム
- [x] ✅ 原文・修正文並列表示
- [x] ✅ 違反箇所ハイライト
- [x] ✅ 差分表示機能
- [x] ✅ 違反詳細表示
- [x] ✅ タブ切替UI

### 3.4 非同期処理・SSE
- [x] ✅ Server-Sent Events 実装
- [x] ✅ 処理進捗リアルタイム配信
- [x] ✅ エラーハンドリング
- [x] ✅ 接続管理
- [ ] 🔄 処理キャンセル機能

### 3.5 パフォーマンス最適化
- [ ] ⏳ データベースクエリ最適化 🎯
- [ ] ⏳ 同時処理能力向上
- [ ] ⏳ レスポンス時間短縮（≤5秒）
- [ ] ⏳ メモリ使用量最適化
- [ ] ⏳ キャッシュ機能実装

---

## 🎯 Phase 4: 画像アップロード・OCR機能 (新規)

### 4.1 画像アップロードUI
- [ ] ⏳ ImageChecker コンポーネント作成 🎯
- [ ] ⏳ ドラッグ&ドロップ機能 (react-dropzone)
- [ ] ⏳ 画像プレビュー機能
- [ ] ⏳ ファイル形式・サイズ検証
- [ ] ⏳ 進捗表示UI

### 4.2 画像ストレージ
- [ ] ⏳ Supabase Storage 設定
- [ ] ⏳ 画像アップロード API
- [ ] ⏳ 一時ファイル管理
- [ ] ⏳ 自動削除機能（1時間後）
- [ ] ⏳ アクセス制御設定

### 4.3 OCR処理システム
- [ ] ⏳ Tesseract.js 統合 (MVP) 🎯
- [ ] ⏳ Google Vision API 統合 (本格運用)
- [ ] ⏳ OCR クライアント抽象化
- [ ] ⏳ 画像前処理機能
- [ ] ⏳ OCR結果検証機能

### 4.4 画像チェック API
- [ ] ⏳ POST /api/ocr エンドポイント 🎯
- [ ] ⏳ 画像処理ワークフロー
- [ ] ⏳ OCR→テキストチェック連携
- [ ] ⏳ 処理状況管理
- [ ] ⏳ エラーハンドリング

### 4.5 データベース拡張
- [ ] ⏳ checks テーブル拡張 🎯
  - [ ] ⏳ input_type カラム追加
  - [ ] ⏳ extracted_text カラム追加
  - [ ] ⏳ image_url カラム追加
  - [ ] ⏳ ocr_status カラム追加
  - [ ] ⏳ ocr_metadata カラム追加

### 4.6 レスポンシブUI設計
- [ ] ⏳ モバイル対応レイアウト
- [ ] ⏳ タブレット対応レイアウト
- [ ] ⏳ デスクトップ3カラム表示
- [ ] ⏳ 画像サイズ調整機能

---

## 🎯 Phase 5: 履歴・データ管理

### 5.1 チェック履歴システム
- [ ] 🔄 履歴一覧画面強化
- [ ] 🔄 履歴詳細表示改善
- [ ] ⏳ 履歴検索機能 🎯
- [ ] ⏳ フィルタ・ソート機能
- [ ] ⏳ ページネーション改善

### 5.2 履歴管理機能
- [x] ✅ 履歴自動保存
- [ ] 🔄 履歴削除機能（論理削除）
- [ ] ⏳ 履歴エクスポート機能
- [ ] ⏳ 履歴統計表示
- [ ] ⏳ 管理者向け組織履歴

### 5.3 データエクスポート
- [ ] ⏳ PDF レポート生成 🎯
- [ ] ⏳ CSV エクスポート機能
- [ ] ⏳ Excel エクスポート機能
- [ ] ⏳ ハイライト付きPDF
- [ ] ⏳ カスタムレポート機能

### 5.4 画像チェック履歴対応
- [ ] ⏳ 画像付き履歴表示
- [ ] ⏳ OCR結果の履歴保存
- [ ] ⏳ 画像・テキスト混合履歴
- [ ] ⏳ 画像プレビュー機能

---

## 🎯 Phase 6: 課金・決済システム

### 6.1 Stripe 統合
- [ ] ⏳ Stripe アカウント設定 🎯
- [ ] ⏳ Stripe API 統合
- [ ] ⏳ Webhook 設定
- [ ] ⏳ 決済フロー実装
- [ ] ⏳ セキュリティ設定

### 6.2 料金プラン管理
- [ ] ⏳ プラン設定システム 🎯
- [ ] ⏳ 利用制限管理
- [ ] ⏳ 従量課金機能
- [ ] ⏳ 無料トライアル管理
- [ ] ⏳ プランアップグレード

### 6.3 請求・支払い管理
- [ ] ⏳ 月次請求処理 🎯
- [ ] ⏳ 請求書自動生成
- [ ] ⏳ 領収書発行機能
- [ ] ⏳ 支払い履歴管理
- [ ] ⏳ 支払い失敗処理

### 6.4 使用量追跡
- [x] ✅ 基本使用量カウント
- [ ] ⏳ 詳細使用量分析
- [ ] ⏳ 使用量アラート
- [ ] ⏳ 使用量ダッシュボード
- [ ] ⏳ 予算管理機能

### 6.5 課金UI
- [ ] ⏳ 料金プラン選択画面
- [ ] ⏳ 支払い方法設定画面
- [ ] ⏳ 請求履歴画面
- [ ] ⏳ 使用量表示画面
- [ ] ⏳ アップグレード画面

---

## 🎯 Phase 7: 性能・セキュリティ強化

### 7.1 パフォーマンス最適化
- [ ] ⏳ データベースインデックス最適化 🎯
- [ ] ⏳ クエリ最適化
- [ ] ⏳ CDN 設定
- [ ] ⏳ 画像最適化
- [ ] ⏳ バンドルサイズ最適化

### 7.2 セキュリティ強化
- [ ] ⏳ セキュリティ監査実施 🎯
- [ ] ⏳ HTTPS 完全対応
- [ ] ⏳ CSRF 対策強化
- [ ] ⏳ XSS 対策強化
- [ ] ⏳ SQLインジェクション対策

### 7.3 可用性・信頼性
- [ ] ⏳ ヘルスチェック実装
- [ ] ⏳ 死活監視設定
- [ ] ⏳ ログ監視システム
- [ ] ⏳ アラート設定
- [ ] ⏳ 障害対応手順書

### 7.4 バックアップ・復旧
- [ ] ⏳ 自動バックアップ設定 🎯
- [ ] ⏳ Point-in-Time Recovery
- [ ] ⏳ 災害復旧計画
- [ ] ⏳ データ復旧テスト
- [ ] ⏳ バックアップ監視

---

## 🎯 Phase 8: 管理・運用機能

### 8.1 管理者ダッシュボード
- [ ] ⏳ システム概要ダッシュボード
- [ ] ⏳ 使用量統計表示
- [ ] ⏳ ユーザー活動監視
- [ ] ⏳ エラー率監視
- [ ] ⏳ パフォーマンス監視

### 8.2 ユーザーサポート
- [ ] ⏳ お問い合わせフォーム
- [ ] ⏳ FAQ システム
- [ ] ⏳ ヘルプドキュメント
- [ ] ⏳ チュートリアル機能
- [ ] ⏳ サポートチケット管理

### 8.3 システム設定
- [ ] ⏳ システム設定画面
- [ ] ⏳ 機能フラグ管理
- [ ] ⏳ メンテナンスモード
- [ ] ⏳ 通知設定管理
- [ ] ⏳ API 設定管理

### 8.4 分析・レポート
- [ ] ⏳ 利用統計分析
- [ ] ⏳ ユーザー行動分析
- [ ] ⏳ 売上分析
- [ ] ⏳ 品質分析
- [ ] ⏳ カスタムレポート

---

## 🧪 Phase 9: テスト・品質保証

### 9.1 テストカバレッジ向上
- [ ] 🔄 単体テスト強化（目標: 80%）🎯
- [ ] 🔄 統合テスト追加
- [ ] 🔄 E2E テスト修正・追加
- [ ] ⏳ 視覚回帰テスト
- [ ] ⏳ パフォーマンステスト

### 9.2 テストデータ管理
- [x] ✅ テストデータシード機能
- [ ] 🔄 テストデータファクトリ
- [ ] ⏳ テスト環境自動構築
- [ ] ⏳ テストデータ初期化
- [ ] ⏳ テストデータ検証

### 9.3 CI/CD パイプライン
- [ ] ⏳ GitHub Actions 設定 🎯
- [ ] ⏳ 自動テスト実行
- [ ] ⏳ 自動デプロイ
- [ ] ⏳ コード品質チェック
- [ ] ⏳ セキュリティスキャン

### 9.4 品質管理
- [x] ✅ ESLint 設定
- [x] ✅ Prettier 設定
- [x] ✅ TypeScript 厳格設定
- [ ] ⏳ コードレビュープロセス
- [ ] ⏳ 品質ゲート設定

---

## 🎨 Phase 10: UI/UX 改善

### 10.1 レスポンシブデザイン
- [x] ✅ 基本レスポンシブ対応
- [ ] 🔄 モバイル最適化
- [ ] ⏳ タブレット最適化
- [ ] ⏳ 大画面対応
- [ ] ⏳ 画面サイズ最適化

### 10.2 アクセシビリティ
- [ ] ⏳ WCAG 2.1 AA 準拠 🎯
- [ ] ⏳ キーボードナビゲーション
- [ ] ⏳ スクリーンリーダー対応
- [ ] ⏳ 色覚多様性対応
- [ ] ⏳ 音声読み上げ対応

### 10.3 ユーザビリティ
- [ ] ⏳ ユーザビリティテスト実施
- [ ] ⏳ UI改善実装
- [ ] ⏳ ローディング状態改善
- [ ] ⏳ エラーメッセージ改善
- [ ] ⏳ ヘルプ機能強化

### 10.4 多言語対応準備
- [ ] ⏳ i18n システム構築
- [ ] ⏳ 日本語リソース整理
- [ ] ⏳ 英語リソース準備
- [ ] ⏳ 言語切り替え機能
- [ ] ⏳ RTL 対応準備

---

## 🚀 Phase 11: リリース準備

### 11.1 本番環境準備
- [ ] ⏳ 本番データベース設定 🎯
- [ ] ⏳ 本番環境変数設定
- [ ] ⏳ DNS 設定
- [ ] ⏳ SSL 証明書設定
- [ ] ⏳ CDN 設定

### 11.2 法的準備
- [ ] ⏳ 利用規約作成 🎯
- [ ] ⏳ プライバシーポリシー作成
- [ ] ⏳ 特定商取引法表記
- [ ] ⏳ Cookie ポリシー
- [ ] ⏳ 法的審査実施

### 11.3 マーケティング準備
- [ ] ⏳ ランディングページ作成
- [ ] ⏳ 商品紹介動画作成
- [ ] ⏳ プレスリリース準備
- [ ] ⏳ SNS アカウント開設
- [ ] ⏳ SEO 対策実装

### 11.4 運用準備
- [ ] ⏳ 監視システム設定
- [ ] ⏳ アラート設定
- [ ] ⏳ ログ分析環境
- [ ] ⏳ 障害対応手順書
- [ ] ⏳ 運用チーム教育

### 11.5 βテスト
- [ ] ⏳ βテスト計画策定
- [ ] ⏳ βユーザー募集
- [ ] ⏳ フィードバック収集
- [ ] ⏳ 問題修正実装
- [ ] ⏳ 最終品質確認

---

## 📊 進捗サマリー

### 全体進捗
- **完了**: 42 項目 ✅
- **進行中**: 8 項目 🔄
- **未着手**: 156 項目 ⏳
- **ブロック**: 0 項目 ❌

### フェーズ別進捗
| フェーズ | 完了率 | 状態 |
|---------|--------|------|
| Phase 0: 基盤・認証 | 100% | ✅ 完了 |
| Phase 1: ユーザー管理 | 90% | 🔄 ほぼ完了 |
| Phase 2: 辞書管理 | 60% | 🔄 進行中 |
| Phase 3: テキストチェック | 80% | 🔄 進行中 |
| Phase 4: 画像アップロード | 0% | ⏳ 未着手 |
| Phase 5: 履歴・データ管理 | 20% | ⏳ 一部着手 |
| Phase 6: 課金・決済 | 5% | ⏳ 一部着手 |
| Phase 7: 性能・セキュリティ | 0% | ⏳ 未着手 |
| Phase 8: 管理・運用 | 0% | ⏳ 未着手 |
| Phase 9: テスト・品質 | 40% | 🔄 進行中 |
| Phase 10: UI/UX改善 | 25% | 🔄 一部完了 |
| Phase 11: リリース準備 | 0% | ⏳ 未着手 |

### MVP 重要度別
- **🎯 優先度高（MVP必須）**: 35 項目
- **通常優先度**: 171 項目

---

## 🎯 次の重点項目

### 今週の最優先タスク
1. **テストカバレッジ向上** (Phase 9.1) - 3.08% → 80%
2. **画像アップロード機能開始** (Phase 4.1) - ImageChecker コンポーネント
3. **CSV インポート・エクスポート** (Phase 2.4) - 辞書管理強化

### 今月の目標
1. **Phase 4 完了**: 画像アップロード・OCR機能
2. **Phase 2 完了**: 辞書管理システム
3. **Phase 9 強化**: テスト品質向上

### MVP リリースまでの必須項目
1. Phase 4: 画像アップロード・OCR機能
2. Phase 6: 課金・決済システム
3. Phase 5: 履歴・エクスポート機能
4. Phase 7: セキュリティ・パフォーマンス
5. Phase 11: リリース準備

---

**作成者**: 開発チーム  
**次回更新**: 毎週月曜日  
**関連ドキュメント**: 
- [要件定義書](./REQUIREMENTS_DEFINITION.md)
- [詳細設計書](./DETAILED_DESIGN.md)
- [プロジェクト計画書](./PROJECT_PLAN.md)
- [画像アップロード機能仕様書](./IMAGE_UPLOAD_FEATURE_SPEC.md)